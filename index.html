<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Game</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        #game-container {
            width: 100%;
            max-width: 600px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            box-sizing: border-box;
            position: relative;
        }

        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }
        
        .page.active {
            display: flex;
        }

        h1 {
            font-size: 2.5em;
            color: #4b0082;
            margin-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #008080;
            margin-top: 0;
        }
        
        p {
            font-size: 1.2em;
        }

        button {
            background-color: #ff6347;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #e5533d;
        }

        #category-buttons button {
            background-color: #20b2aa;
        }
        
        #category-buttons button:hover {
            background-color: #1a9690;
        }

        #question-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #4b0082;
            margin-bottom: 20px;
        }

        #image-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .image-option {
            background-color: #e6f3ff;
            border: 4px solid transparent;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s, border-color 0.3s;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .image-option svg {
            width: 100px;
            height: 100px;
        }

        .image-option:hover {
            animation: bounce 0.5s infinite;
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .image-option.correct {
            border-color: #28a745;
        }
        
        .image-option.wrong {
            border-color: #dc3545;
        }

        #coloring-area {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .svg-container {
            width: 100%;
            max-width: 300px;
            margin-bottom: 20px;
        }
        
        .svg-container svg {
            width: 100%;
            height: auto;
        }
        
        .svg-container svg * {
            stroke: #333; /* Outline color */
            stroke-width: 2;
        }
        
        .color-palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ccc;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .color-swatch.active {
            transform: scale(1.2);
            border-color: #333;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        .modal-content h3 {
            margin: 0 0 10px;
            color: #333;
        }

        .image-label {
            font-size: 1em;
            font-weight: bold;
            text-transform: uppercase;
            color: #4b0082;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="menu" class="page active">
            <h1>Interactive Game</h1>
            <p>Ready to have some fun?</p>
            <button onclick="startGame()">Start Playing</button>
        </div>

        <div id="categories" class="page">
            <h2>Choose a Category</h2>
            <div id="category-buttons">
                <button onclick="selectCategory('shapes')">Shapes</button>
                <button onclick="selectCategory('buildings_cars')">Buildings & Cars</button>
            </div>
        </div>

        <div id="game-page" class="page">
            <h2 id="game-title"></h2>
            <p id="question-text"></p>
            <div id="image-grid"></div>
            <div id="coloring-area" style="display: none;">
                <p>Looks great! Now color it in!</p>
                <div class="color-palette">
                    <div class="color-swatch active" style="background-color: #ff6347;" data-color="#ff6347"></div>
                    <div class="color-swatch" style="background-color: #20b2aa;" data-color="#20b2aa"></div>
                    <div class="color-swatch" style="background-color: #8a2be2;" data-color="#8a2be2"></div>
                    <div class="color-swatch" style="background-color: #ffd700;" data-color="#ffd700"></div>
                </div>
                <div id="svg-container" class="svg-container"></div>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <h3 id="modal-text"></h3>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>

    <script>
        // --- Game Logic ---
        const pages = document.querySelectorAll('.page');
        const modal = document.getElementById('myModal');
        const modalText = document.getElementById('modal-text');
        
        let currentCategory = '';
        let currentQuestionIndex = 0;
        let isCorrect = false;
        let selectedColor = '#ff6347';
        let partsToColor = new Set();
        let partsColored = new Set();

        const gameData = {
            shapes: [
                {
                    question: "Pick the blue APPLE!",
                    answer: "blue-apple",
                    images: {
                        'red-apple': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path id="apple-stem" fill="none" /><path id="apple-body" fill="none" /></svg>',
                        'green-apple': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path id="apple-stem" fill="none" /><path id="apple-body" fill="none" /></svg>',
                        'blue-apple': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path id="apple-stem" fill="none" /><path id="apple-body" fill="none" /></svg>',
                        'purple-apple': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path id="apple-stem" fill="none" /><path id="apple-body" fill="none" /></svg>'
                    }
                },
                {
                    question: "Pick the green TRIANGLE!",
                    answer: "green-triangle",
                    images: {
                        'red-circle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><circle id="circle-shape" cx="100" cy="100" r="80" fill="none" /></svg>',
                        'blue-square': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><rect id="square-shape" x="20" y="20" width="160" height="160" fill="none" /></svg>',
                        'green-triangle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><polygon id="triangle-shape" points="100,20 180,180 20,180" fill="none" /></svg>',
                        'yellow-star': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><polygon id="star-shape" points="100,10 40,190 190,70 10,70 160,190" fill="none" /></svg>'
                    }
                }
            ],
            buildings_cars: [
                {
                    question: "Which one is a CASTLE?",
                    answer: "castle",
                    images: {
                        'house': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="house-parts"><path id="house-roof" fill="none" /><path id="house-walls" fill="none" /><rect id="house-door" fill="none" /></g></svg>',
                        'castle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="castle-parts"><path id="castle-wall" fill="none" /><path id="castle-tower" fill="none" /><path id="castle-flag" fill="none" /></g></svg>',
                        'car': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="car-parts"><path id="car-body" fill="none" /><path id="car-top" fill="none" /><circle id="car-wheel-front" fill="none" /><circle id="car-wheel-back" fill="none" /></g></svg>',
                        'tree': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="tree-parts"><path id="tree-trunk" fill="none" /><path id="tree-leaves" fill="none" /></g></svg>'
                    }
                },
                {
                    question: "Which one is a CAR?",
                    answer: "car",
                    images: {
                        'car': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="car-parts"><path id="car-body" fill="none" /><path id="car-top" fill="none" /><circle id="car-wheel-front" fill="none" /><circle id="car-wheel-back" fill="none" /></g></svg>',
                        'house': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="house-parts"><path id="house-roof" fill="none" /><path id="house-walls" fill="none" /><rect id="house-door" fill="none" /></g></svg>',
                        'castle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="castle-parts"><path id="castle-wall" fill="none" /><path id="castle-tower" fill="none" /><path id="castle-flag" fill="none" /></g></svg>',
                        'tree': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="tree-parts"><path id="tree-trunk" fill="none" /><path id="tree-leaves" fill="none" /></g></svg>'
                    }
                }
            ]
        };

        const imageDetails = {
            'red-apple': 'apple', 'green-apple': 'apple', 'blue-apple': 'apple', 'purple-apple': 'apple',
            'red-circle': 'circle', 'blue-square': 'square', 'green-triangle': 'triangle', 'yellow-star': 'star',
            'house': 'house', 'castle': 'castle', 'car': 'car', 'tree': 'tree'
        };

        // UI Functions
        function changePage(id) {
            pages.forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(id).classList.add('active');
        }
        
        function startGame() {
            changePage('categories');
        }

        function showModal(text, duration = 1500) {
            modalText.innerHTML = text;
            modal.style.display = 'flex';
            setTimeout(closeModal, duration);
        }
        
        function closeModal() {
            modal.style.display = 'none';
        }

        // Game Logic
        function selectCategory(category) {
            currentCategory = category;
            currentQuestionIndex = 0;
            document.getElementById('game-title').innerText = `Category: ${category.charAt(0).toUpperCase() + category.slice(1).replace('_', ' & ')}`;
            changePage('game-page');
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= 10) {
                showModal("You finished the game! Great job! 🎉", 3000);
                setTimeout(() => changePage('menu'), 3000);
                return;
            }

            const categoryQuestions = gameData[currentCategory];
            const questionData = categoryQuestions[currentQuestionIndex % categoryQuestions.length];
            document.getElementById('question-text').innerText = questionData.question;
            const grid = document.getElementById('image-grid');
            grid.innerHTML = '';
            
            const imageKeys = Object.keys(questionData.images).sort(() => Math.random() - 0.5);

            imageKeys.forEach(key => {
                const div = document.createElement('div');
                div.classList.add('image-option');
                div.dataset.answer = key;
                div.innerHTML = questionData.images[key];

                const label = document.createElement('span');
                label.classList.add('image-label');
                label.innerText = imageDetails[key] || '';
                div.prepend(label);

                div.onclick = () => checkAnswer(key, questionData.answer, div);
                grid.appendChild(div);
            });

            document.getElementById('image-grid').style.display = 'grid';
            document.getElementById('coloring-area').style.display = 'none';
            isCorrect = false;
        }

        function checkAnswer(selected, correct, element) {
            if (isCorrect) return;

            if (selected === correct) {
                isCorrect = true;
                element.classList.add('correct');
                showModal("Correct! Great job!", 1000);
                playSound(800, 0.1);
                
                document.getElementById('image-grid').style.display = 'none';
                document.getElementById('coloring-area').style.display = 'flex';
                
                const svgContainer = document.getElementById('svg-container');
                const svgClone = element.querySelector('svg').cloneNode(true);
                svgContainer.innerHTML = '';
                svgContainer.appendChild(svgClone);

                partsToColor = new Set();
                partsColored = new Set();
                svgClone.querySelectorAll('*').forEach(part => {
                    if (part.tagName !== 'g') {
                        partsToColor.add(part.id);
                        part.onclick = () => colorSvgPart(part);
                        part.style.cursor = 'pointer';
                        part.style.transition = 'fill 0.5s ease-in-out';
                    }
                });

            } else {
                element.classList.add('wrong');
                showModal("Oops! Try again!", 1000);
                playSound(200, 0.3, 'sawtooth');
                setTimeout(() => {
                    element.classList.remove('wrong');
                }, 1000);
            }
        }
        
        function colorSvgPart(part) {
            if (partsColored.has(part.id)) return;

            part.style.fill = selectedColor;
            partsColored.add(part.id);
            playSound(440, 0.05);

            if (partsColored.size === partsToColor.size) {
                showModal("All done! Let's go to the next one!", 1500);
                setTimeout(nextQuestion, 1500);
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }
        
        document.querySelectorAll('.color-swatch').forEach(swatch => {
            swatch.onclick = () => {
                document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                swatch.classList.add('active');
                selectedColor = swatch.dataset.color;
            };
        });

        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(frequency, duration, type = 'sine', volume = 0.5) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            gainNode.gain.value = volume;
            oscillator.start();
            setTimeout(() => { oscillator.stop(); }, duration * 1000);
        }
    </script>
</body>
</html>
