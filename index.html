<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Game</title>
    <style>
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #e6f3ff;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        #game-container {
            width: 100%;
            max-width: 700px;
            background-color: #fff;
            border-radius: 25px;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
            padding: 40px;
            box-sizing: border-box;
        }

        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 450px;
        }

        .page.active {
            display: flex;
        }

        h1 {
            font-size: 3em;
            color: #ff4500;
            margin-bottom: 15px;
        }

        h2 {
            font-size: 2.2em;
            color: #008080;
            margin-top: 0;
        }

        p {
            font-size: 1.3em;
        }

        button {
            background-color: #ff6347;
            color: white;
            border: none;
            padding: 15px 35px;
            margin: 12px;
            font-size: 1.3em;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #e5533d;
            transform: scale(1.05);
        }

        #category-buttons button {
            background-color: #32cd32;
        }

        #category-buttons button:hover {
            background-color: #28a745;
        }

        #question-text {
            font-size: 2em;
            font-weight: bold;
            color: #ff4500;
            margin-bottom: 25px;
        }

        #image-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 25px;
        }

        .image-option {
            background-color: #f0f8ff;
            border: 5px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.3s, border-color 0.3s;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .image-option svg {
            width: 120px;
            height: 120px;
        }

        .image-option:hover {
            animation: bounce 0.5s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .image-option.correct {
            border-color: #32cd32;
            animation: pulse 0.5s ease-in-out 2;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .image-option.wrong {
            border-color: #ff4500;
        }

        #coloring DO NOT USE
        .color-palette {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .color-swatch {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid #ccc;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .color-swatch.active {
            transform: scale(1.15);
            border-color: #333;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: #fff;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .modal-content h3 {
            margin: 0 0 15px;
            color: #333;
            font-size: 1.5em;
        }

        .image-label {
            font-size: 1.1em;
            font-weight: bold;
            text-transform: uppercase;
            color: #ff4500;
            margin-top: 8px;
        }

        @keyframes fillAnimation {
            0% {
                fill: transparent;
                transform: scale(0.5);
                opacity: 0.3;
            }
            100% {
                fill: var(--fill-color);
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="menu" class="page active">
            <h1>Interactive Game</h1>
            <p>Ready to have some fun?</p>
            <button onclick="startGame()">Start Playing</button>
        </div>

        <div id="categories" class="page">
            <h2>Choose a Category</h2>
            <div id="category-buttons">
                <button onclick="selectCategory('shapes')">Shapes</button>
                <button onclick="selectCategory('buildings_cars')">Buildings & Cars</button>
            </div>
        </div>

        <div id="game-page" class="page">
            <h2 id="game-title"></h2>
            <p id="question-text"></p>
            <div id="image-grid"></div>
            <div id="coloring-area" style="display: none;">
                <p>Color it in!</p>
                <div class="color-palette">
                    <div class="color-swatch active" style="background-color: #ff4500;" data-color="#ff4500"></div>
                    <div class="color-swatch" style="background-color: #00ff00;" data-color="#00ff00"></div>
                    <div class="color-swatch" style="background-color: #1e90ff;" data-color="#1e90ff"></div>
                    <div class="color-swatch" style="background-color: #ffff00;" data-color="#ffff00"></div>
                </div>
                <div id="svg-container" class="svg-container"></div>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <h3 id="modal-text"></h3>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>

    <script>
        const pages = document.querySelectorAll('.page');
        const modal = document.getElementById('myModal');
        const modalText = document.getElementById('modal-text');
        
        let currentCategory = '';
        let currentQuestionIndex = 0;
        let isCorrect = false;
        let selectedColor = '#ff4500';
        let partsToColor = new Set();
        let partsColored = new Set();

        const gameData = {
            shapes: [
                {
                    question: "APPLE",
                    answer: "apple",
                    images: {
                        'apple': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="apple-parts"><path id="apple-body" d="M100,30 C150,30 180,70 180,110 C180,150 140,180 100,180 C60,180 20,150 20,110 C20,70 50,30 100,30 Z" fill="none" stroke="#333" stroke-width="3"/><path id="apple-leaf" d="M110,30 C120,20 140,20 150,30 C140,40 120,40 110,30 Z" fill="none" stroke="#333" stroke-width="3"/><path id="apple-stem" d="M95,50 C90,30 110,30 105,50 Z" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'triangle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><polygon id="triangle-shape" points="100,20 180,180 20,180" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>',
                        'circle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><circle id="circle-shape" cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>',
                        'square': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><rect id="square-shape" x="15" y="15" width="170" height="170" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>'
                    }
                },
                {
                    question: "TRIANGLE",
                    answer: "triangle",
                    images: {
                        'circle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><circle id="circle-shape" cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>',
                        'square': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><rect id="square-shape" x="15" y="15" width="170" height="170" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>',
                        'triangle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><polygon id="triangle-shape" points="100,20 180,180 20,180" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>',
                        'star': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><polygon id="star-shape" points="100,20 120,80 180,80 130,120 150,180 100,140 50,180 70,120 20,80 80,80" fill="none" stroke="#333" stroke-width="3" filter="url(#shadow)"/><defs><filter id="shadow"><feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.2"/></filter></defs></svg>'
                    }
                }
            ],
            buildings_cars: [
                {
                    question: "CASTLE",
                    answer: "castle",
                    images: {
                        'house': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="house-parts"><path id="house-roof" d="M100,30 L20,90 L180,90 Z" fill="none" stroke="#333" stroke-width="3"/><path id="house-walls" d="M30,90 L30,180 L170,180 L170,90 Z" fill="none" stroke="#333" stroke-width="3"/><rect id="house-door" x="80" y="130" width="40" height="50" fill="none" stroke="#333" stroke-width="3"/><rect id="house-window1" x="50" y="100" width="25" height="25" fill="none" stroke="#333" stroke-width="3"/><rect id="house-window2" x="125" y="100" width="25" height="25" fill="none" stroke="#333" stroke-width="3"/><path id="house-chimney" d="M140,90 L140,60 L155,60 L155,90 Z" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'castle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="castle-parts"><path id="castle-wall" d="M30,180 L30,80 C30,70 45,60 60,80 L60,180 L140,180 L140,80 C140,70 155,60 170,80 L170,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-tower1" d="M40,180 L40,50 C40,40 50,40 60,50 L60,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-tower2" d="M140,180 L140,50 C140,40 150,40 160,50 L160,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-flag" d="M155,50 C155,40 165,30 170,40 C165,50 155,50 155,50 Z" fill="none" stroke="#333" stroke-width="3"/><rect id="castle-window1" x="50" y="100" width="20" height="20" fill="none" stroke="#333" stroke-width="3"/><rect id="castle-window2" x="130" y="100" width="20" height="20" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'car': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="car-parts"><path id="car-body" d="M20,130 L40,100 L160,100 L180,130 L180,160 L20,160 Z" fill="none" stroke="#333" stroke-width="3"/><path id="car-top" d="M50,100 L150,100 C150,90 160,80 150,70 C140,60 60,60 50,70 C40,80 50,100 50,100 Z" fill="none" stroke="#333" stroke-width="3"/><circle id="car-wheel-front" cx="60" cy="160" r="20" fill="none" stroke="#333" stroke-width="3"/><circle id="car-wheel-back" cx="140" cy="160" r="20" fill="none" stroke="#333" stroke-width="3"/><rect id="car-window" x="70" y="80" width="60" height="20" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'tree': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="tree-parts"><path id="tree-trunk" d="M90,130 L90,180 L110,180 L110,130 Z" fill="none" stroke="#333" stroke-width="3"/><path id="tree-leaves" d="M100,30 C150,30 180,70 180,110 C180,150 140,180 100,180 C60,180 20,150 20,110 C20,70 50,30 100,30 Z" fill="none" stroke="#333" stroke-width="3"/><path id="tree-leaves2" d="M100,60 C130,60 150,80 150,100 C150,120 130,140 100,140 C70,140 50,120 50,100 C50,80 70,60 100,60 Z" fill="none" stroke="#333" stroke-width="3"/></g></svg>'
                    }
                },
                {
                    question: "CAR",
                    answer: "car",
                    images: {
                        'car': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="car-parts"><path id="car-body" d="M20,130 L40,100 L160,100 L180,130 L180,160 L20,160 Z" fill="none" stroke="#333" stroke-width="3"/><path id="car-top" d="M50,100 L150,100 C150,90 160,80 150,70 C140,60 60,60 50,70 C40,80 50,100 50,100 Z" fill="none" stroke="#333" stroke-width="3"/><circle id="car-wheel-front" cx="60" cy="160" r="20" fill="none" stroke="#333" stroke-width="3"/><circle id="car-wheel-back" cx="140" cy="160" r="20" fill="none" stroke="#333" stroke-width="3"/><rect id="car-window" x="70" y="80" width="60" height="20" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'house': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="house-parts"><path id="house-roof" d="M100,30 L20,90 L180,90 Z" fill="none" stroke="#333" stroke-width="3"/><path id="house-walls" d="M30,90 L30,180 L170,180 L170,90 Z" fill="none" stroke="#333" stroke-width="3"/><rect id="house-door" x="80" y="130" width="40" height="50" fill="none" stroke="#333" stroke-width="3"/><rect id="house-window1" x="50" y="100" width="25" height="25" fill="none" stroke="#333" stroke-width="3"/><rect id="house-window2" x="125" y="100" width="25" height="25" fill="none" stroke="#333" stroke-width="3"/><path id="house-chimney" d="M140,90 L140,60 L155,60 L155,90 Z" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'castle': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="castle-parts"><path id="castle-wall" d="M30,180 L30,80 C30,70 45,60 60,80 L60,180 L140,180 L140,80 C140,70 155,60 170,80 L170,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-tower1" d="M40,180 L40,50 C40,40 50,40 60,50 L60,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-tower2" d="M140,180 L140,50 C140,40 150,40 160,50 L160,180 Z" fill="none" stroke="#333" stroke-width="3"/><path id="castle-flag" d="M155,50 C155,40 165,30 170,40 C165,50 155,50 155,50 Z" fill="none" stroke="#333" stroke-width="3"/><rect id="castle-window1" x="50" y="100" width="20" height="20" fill="none" stroke="#333" stroke-width="3"/><rect id="castle-window2" x="130" y="100" width="20" height="20" fill="none" stroke="#333" stroke-width="3"/></g></svg>',
                        'tree': '<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><g id="tree-parts"><path id="tree-trunk" d="M90,130 L90,180 L110,180 L110,130 Z" fill="none" stroke="#333" stroke-width="3"/><path id="tree-leaves" d="M100,30 C150,30 180,70 180,110 C180,150 140,180 100,180 C60,180 20,150 20,110 C20,70 50,30 100,30 Z" fill="none" stroke="#333" stroke-width="3"/><path id="tree-leaves2" d="M100,60 C130,60 150,80 150,100 C150,120 130,140 100,140 C70,140 50,120 50,100 C50,80 70,60 100,60 Z" fill="none" stroke="#333" stroke-width="3"/></g></svg>'
                    }
                }
            ]
        };

        const imageDetails = {
            'apple': 'apple', 'triangle': 'triangle', 'circle': 'circle', 'square': 'square', 'star': 'star',
            'house': 'house', 'castle': 'castle', 'car': 'car', 'tree': 'tree'
        };

        function changePage(id) {
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function startGame() {
            changePage('categories');
        }

        function showModal(text, duration = 1500) {
            modalText.innerHTML = text;
            modal.style.display = 'flex';
            setTimeout(closeModal, duration);
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        function selectCategory(category) {
            currentCategory = category;
            currentQuestionIndex = 0;
            document.getElementById('game-title').innerText = `Category: ${category.charAt(0).toUpperCase() + category.slice(1).replace('_', ' & ')}`;
            changePage('game-page');
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= gameData[currentCategory].length) {
                showModal("You finished the game! Great job! 🎉", 3000);
                setTimeout(() => changePage('menu'), 3000);
                return;
            }

            const categoryQuestions = gameData[currentCategory];
            const questionData = categoryQuestions[currentQuestionIndex];
            document.getElementById('question-text').innerText = questionData.question;
            const grid = document.getElementById('image-grid');
            grid.innerHTML = '';

            const imageKeys = Object.keys(questionData.images).sort(() => Math.random() - 0.5);

            imageKeys.forEach(key => {
                const div = document.createElement('div');
                div.classList.add('image-option');
                div.dataset.answer = key;
                div.innerHTML = questionData.images[key];

                const label = document.createElement('span');
                label.classList.add('image-label');
                label.innerText = imageDetails[key] || '';
                div.prepend(label);

                div.onclick = () => checkAnswer(key, questionData.answer, div);
                grid.appendChild(div);
            });

            document.getElementById('image-grid').style.display = 'grid';
            document.getElementById('coloring-area').style.display = 'none';
            isCorrect = false;
        }

        function checkAnswer(selected, correct, element) {
            if (isCorrect) return;

            if (selected.includes(correct)) {
                isCorrect = true;
                element.classList.add('correct');
                showModal("Correct! Great job!", 1000);
                playSound(800, 0.1);

                document.getElementById('image-grid').style.display = 'none';
                document.getElementById('coloring-area').style.display = 'flex';

                const svgContainer = document.getElementById('svg-container');
                const svgClone = element.querySelector('svg').cloneNode(true);
                svgContainer.innerHTML = '';
                svgContainer.appendChild(svgClone);

                partsToColor = new Set();
                partsColored = new Set();
                svgClone.querySelectorAll('*').forEach(part => {
                    if (part.tagName !== 'g' && part.id) {
                        partsToColor.add(part.id);
                        part.onclick = () => colorSvgPart(part);
                        part.style.cursor = 'pointer';
                    }
                });
            } else {
                element.classList.add('wrong');
                showModal("Oops! Try again!", 1000);
                playSound(200, 0.3, 'sawtooth');
                setTimeout(() => element.classList.remove('wrong'), 1000);
            }
        }

        function colorSvgPart(part) {
            if (partsColored.has(part.id)) return;

            part.style.setProperty('--fill-color', selectedColor);
            part.style.animation = 'fillAnimation 0.7s ease-in-out forwards';
            partsColored.add(part.id);
            playSound(440, 0.05);

            if (partsColored.size === partsToColor.size) {
                showModal("All done! Next one!", 1500);
                setTimeout(nextQuestion, 1500);
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        document.querySelectorAll('.color-swatch').forEach(swatch => {
            swatch.onclick = () => {
                document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                swatch.classList.add('active');
                selectedColor = swatch.dataset.color;
            };
        });

        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(frequency, duration, type = 'sine', volume = 0.5) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            gainNode.gain.value = volume;
            oscillator.start();
            setTimeout(() => oscillator.stop(), duration * 1000);
        }
    </script>
</body>
</html>